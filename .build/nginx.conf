user http;
worker_processes  1;

error_log  /var/log/nginx/error.log;

events {
  worker_connections  4096;
}

http {
    #include       /etc/nginx/mime.types;
    access_log    /var/log/nginx/access.log;

    sendfile        on;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

  server {
      listen   80;
      server_name  localhost;
      access_log  /var/log/nginx/localhost.access.log;

      ## Default location
      location / {
          root   /srv/http;
          index  index.php index.html;
      }

      ## Images and static content is treated different
      location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico|xml)$ {
        access_log        off;
        expires           30d;
        root /srv/http;
      }

      ## Parse all .php file in the /srv/http directory
      location ~ .php$ {
          fastcgi_split_path_info ^(.+\.php)(.*)$;
          fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock; 
          fastcgi_index  index.php;
          fastcgi_param  SCRIPT_FILENAME  /srv/http$fastcgi_script_name;
          include fastcgi_params;
      }

      ## Disable viewing .htaccess & .htpassword
      location ~ /\.ht {
          deny  all;
      }

    }#end server

} #end http

# mail {
#     # See sample authentication script at:
#     # http://wiki.nginx.org/NginxImapAuthenticateWithApachePhpScript
# 
#     # auth_http localhost/auth.php;
#     # pop3_capabilities "TOP" "USER";
#     # imap_capabilities "IMAP4rev1" "UIDPLUS";
# 
#     server {
#         listen     localhost:110;
#         protocol   pop3;
#         proxy      on;
#     }
# 
#     server {
#         listen     localhost:143;
#         protocol   imap;
#         proxy      on;
#     }
# }
